AWSTemplateFormatVersion : '2010-09-09'
Transform: AWS::Serverless-2016-10-31

Description: Prefetch function for station data

Parameters:
    UploadBucketName:
        Type: String
        Default: com.senacor.serverless.samdeployments

Globals:
  Function:
    Tags:
      CostCenter: Tecco
      Owner: dschmitz

Resources:
  IAMLambdaRegistrationRole:
    Type: "AWS::IAM::Role"
    Properties:
      RoleName: "IAMLambdaRegistrationRole"
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          Effect: "Allow"
          Principal:
            Service:
              - lambda.amazonaws.com
          Action:
            - sts:AssumeRole
      ManagedPolicyArns:
          - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Policies:
        -
          PolicyName: "SaveRegistration"
          PolicyDocument:
            Version: "2012-10-17"
            Statement:
              -
                Effect: "Allow"
                Action:
                  - dynamodb:PutItem
                  - dynamodb:GetItem
                Resource: arn:aws:dynamodb:*:604370441254:table/USERS